<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Docker | æ—¶åˆ»å‡†å¤‡ç€</title>
    <meta name="description" content="Dokceré•œåƒå°±æ˜¯ä¸€ä¸ªåªè¯»çš„æ¨¡ç‰ˆã€‚é•œåƒå¯ä»¥ç”¨æ¥åˆ›å»ºDockerå®¹å™¨ï¼Œä¸€ä¸ªé•œåƒå¯ä»¥åˆ›å»ºå¾ˆå¤šå®¹å™¨ã€‚">
    <link rel="stylesheet" href="/blog/assets/style.9243fa93.css">
    <link rel="modulepreload" href="/blog/assets/Home.e1d18961.js">
    <link rel="modulepreload" href="/blog/assets/app.696abebf.js">
    <link rel="modulepreload" href="/blog/assets/posts_Docker.md.b1b5f667.lean.js">
    
    <meta name="twitter:title" content="Docker | æ—¶åˆ»å‡†å¤‡ç€">
  <meta property="og:title" content="Docker | æ—¶åˆ»å‡†å¤‡ç€">
  </head>
  <body>
    <div id="app"><!--[--><div id="cssid" class="theme" data-v-3eaa5914><!--[--><div class="theme"><header class="nav-bar" data-v-40587210><div class="sidebar-button" data-v-40587210><svg class="icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z" class></path></svg></div><a class="nav-bar-title" href="/blog/" aria-label="æ—¶åˆ»å‡†å¤‡ç€, back to home" data-v-40587210 data-v-7ac13a1e><!----> æ—¶åˆ»å‡†å¤‡ç€</a><div class="flex-grow" data-v-40587210></div><div class="nav" data-v-40587210><nav class="nav-links" data-v-40587210 data-v-35b91e7e><!--[--><div class="item" data-v-35b91e7e><div class="nav-link" data-v-35b91e7e data-v-49fe041d><a class="item" href="/blog/" data-v-49fe041d>ä¸»é¡µ <!----></a></div></div><div class="item" data-v-35b91e7e><div class="nav-link" data-v-35b91e7e data-v-49fe041d><a class="item" href="/blog/pages/archives" data-v-49fe041d>å½’æ¡£ <!----></a></div></div><div class="item" data-v-35b91e7e><div class="nav-link" data-v-35b91e7e data-v-49fe041d><a class="item" href="/blog/pages/tags" data-v-49fe041d>åˆ†ç±» <!----></a></div></div><div class="item" data-v-35b91e7e><div class="nav-link" data-v-35b91e7e data-v-49fe041d><a class="item" href="/blog/pages/about" data-v-49fe041d>å…³äº <!----></a></div></div><!--]--><!----><!----></nav></div><!--[--><!--]--></header><aside class="sidebar" data-v-17c48e2f><nav class="nav-links nav" data-v-17c48e2f data-v-35b91e7e><!--[--><div class="item" data-v-35b91e7e><div class="nav-link" data-v-35b91e7e data-v-49fe041d><a class="item" href="/blog/" data-v-49fe041d>ä¸»é¡µ <!----></a></div></div><div class="item" data-v-35b91e7e><div class="nav-link" data-v-35b91e7e data-v-49fe041d><a class="item" href="/blog/pages/archives" data-v-49fe041d>å½’æ¡£ <!----></a></div></div><div class="item" data-v-35b91e7e><div class="nav-link" data-v-35b91e7e data-v-49fe041d><a class="item" href="/blog/pages/tags" data-v-49fe041d>åˆ†ç±» <!----></a></div></div><div class="item" data-v-35b91e7e><div class="nav-link" data-v-35b91e7e data-v-49fe041d><a class="item" href="/blog/pages/about" data-v-49fe041d>å…³äº <!----></a></div></div><!--]--><!----><!----></nav><!--[--><!--]--><ul class="sidebar-links" data-v-17c48e2f><!--[--><li class="sidebar-link"><a class="sidebar-link-item" href="#å¸®åŠ©å¯åŠ¨ç±»å‘½ä»¤">å¸®åŠ©å¯åŠ¨ç±»å‘½ä»¤</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#é•œåƒå‘½ä»¤">é•œåƒå‘½ä»¤</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#å®¹å™¨å‘½ä»¤">å®¹å™¨å‘½ä»¤</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#å®¹å™¨æ•°æ®å·">å®¹å™¨æ•°æ®å·</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#åŸºäºdockerçš„mysqlä¸»ä»å¤åˆ¶">åŸºäºdockerçš„mysqlä¸»ä»å¤åˆ¶</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#docker-redisé›†ç¾¤å®‰è£…ï¼ˆä¼ªé›†ç¾¤ï¼‰">docker redisé›†ç¾¤å®‰è£…ï¼ˆä¼ªé›†ç¾¤ï¼‰</a><!----></li><!--]--></ul><!--[--><!--]--></aside><div class="sidebar-mask"></div><main class="page" data-v-8fcebc32><div class="container" data-v-8fcebc32><!--[--><!--]--><div style="position:relative;" class="content" data-v-8fcebc32><div><h1 id="docker-çš„åŸºæœ¬ç»„æˆ" tabindex="-1">Docker çš„åŸºæœ¬ç»„æˆ <a class="header-anchor" href="#docker-çš„åŸºæœ¬ç»„æˆ" aria-hidden="true">#</a></h1><p><strong>é•œåƒï¼ˆimageï¼‰</strong> Dokceré•œåƒå°±æ˜¯ä¸€ä¸ªåªè¯»çš„æ¨¡ç‰ˆã€‚é•œåƒå¯ä»¥ç”¨æ¥åˆ›å»ºDockerå®¹å™¨ï¼Œä¸€ä¸ªé•œåƒå¯ä»¥åˆ›å»ºå¾ˆå¤šå®¹å™¨ã€‚ å®ƒç›¸å½“äºä¸€ä¸ªrootæ–‡ä»¶ç³»ç»Ÿã€‚æ¯”å¦‚å®˜æ–¹é•œåƒcentosï¼š7å°±åŒ…å«äº†å®Œæ•´çš„ä¸€å¥—centos:7æœ€å°ç³»ç»Ÿçš„rootæ–‡ä»¶ç³»ç»Ÿã€‚ ç›¸å½“äºå®¹å™¨çš„â€œæºä»£ç â€ï¼Œdockeré•œåƒæ–‡ä»¶ç±»ä¼¼äºJavaçš„ç±»æ¨¡ç‰ˆï¼Œè€Œdokcerå®¹å™¨å®ä¾‹ç±»ä¼¼äºjavaä¸­newå‡ºæ¥çš„å®ä¾‹å¯¹è±¡ã€‚ <strong>å®¹å™¨ï¼ˆcontainerï¼‰</strong> Dockeråˆ©ç”¨å®¹å™¨ç‹¬ç«‹è¿è¡Œçš„ä¸€ä¸ªæˆ–ä¸€ç»„åº”ç”¨ï¼Œåº”ç”¨ç¨‹åºæˆ–æœåŠ¡è¿è¡Œåœ¨å®¹å™¨é‡Œé¢ï¼Œå®¹å™¨å°±ç±»ä¼¼äºä¸€ä¸ªè™šæ‹ŸåŒ–çš„è¿è¡Œç¯å¢ƒï¼Œå®¹å™¨æ˜¯ç”¨é•œåƒåˆ›å»ºçš„è¿è¡Œç¤ºä¾‹ã€‚å°±åƒæ˜¯Javaä¸­çš„ç±»å’Œå®ä¾‹å¯¹è±¡ä¸€æ ·ï¼Œé•œåƒæ˜¯é™æ€çš„å®šä¹‰ï¼Œå®¹å™¨æ˜¯é•œåƒè¿è¡Œæ—¶çš„å®ä½“ã€‚å®¹å™¨ä¸ºé•œåƒæä¾›ä¾‹ä¸€ä¸ªæ ‡å‡†çš„å’Œéš”ç¦»çš„è¿è¡Œç¯å¢ƒï¼Œå®ƒå¯ä»¥è¢«å¯åŠ¨ã€å¼€å§‹ã€åœæ­¢ã€åˆ é™¤ã€‚æ¯ä¸ªå®¹å™¨éƒ½æ˜¯ç›¸äº’éš”ç¦»çš„ã€ä¿è¯å®‰å…¨çš„å¹³å° å¯ä»¥æŠŠå®¹å™¨çœ‹åšæ˜¯ä¸€ä¸ªç®€æ˜“ç‰ˆçš„Linuxç¯å¢ƒï¼ˆåŒ…æ‹¬rootç”¨æˆ·æƒé™ã€è¿›ç¨‹ç©ºé—´ã€ç”¨æˆ·ç©ºé—´å’Œç½‘ç»œç©ºé—´ç­‰ï¼‰å’Œè¿è¡Œåœ¨å…¶ä¸­çš„åº”ç”¨ç¨‹åºã€‚ <strong>ä»“åº“ï¼ˆrepositoryï¼‰</strong> é›†ä¸­å­˜æ”¾é•œåƒæ–‡ä»¶çš„åœºæ‰€ ä»“åº“åˆ†ä¸ºå…¬å…±ä»“åº“å’Œç§æœ‰ä»“åº“ å…¨çƒæœ€å¤§çš„å…¬å…±ä»“åº“æ˜¯docker hub</p><h1 id="dockerå‘½ä»¤" tabindex="-1">dockerå‘½ä»¤ <a class="header-anchor" href="#dockerå‘½ä»¤" aria-hidden="true">#</a></h1><h2 id="å¸®åŠ©å¯åŠ¨ç±»å‘½ä»¤" tabindex="-1">å¸®åŠ©å¯åŠ¨ç±»å‘½ä»¤ <a class="header-anchor" href="#å¸®åŠ©å¯åŠ¨ç±»å‘½ä»¤" aria-hidden="true">#</a></h2><div class="language-java"><pre><code><span class="token comment">//å¯åŠ¨docker</span>
systemctl start docker
<span class="token comment">//åœæ­¢docker</span>
systemctl stop docker
<span class="token comment">//é‡å¯docker</span>
systemctl restart docker
<span class="token comment">//æŸ¥çœ‹dockerçŠ¶æ€</span>
systemctl status docker
<span class="token comment">//å¼€æœºå¯åŠ¨</span>
systemctl enable docker
<span class="token comment">//æŸ¥çœ‹dockeræ¦‚è¦ä¿¡æ¯</span>
docker info
<span class="token comment">//æŸ¥çœ‹dockeræ€»ä½“å¸®åŠ©æ–‡æ¡£</span>
docker <span class="token operator">--</span>help
<span class="token comment">//æŸ¥çœ‹dockerå‘½ä»¤å¸®åŠ©æ–‡æ¡£</span>
docker ã€å‘½ä»¤ã€‘<span class="token operator">--</span>help

</code></pre></div><h2 id="é•œåƒå‘½ä»¤" tabindex="-1">é•œåƒå‘½ä»¤ <a class="header-anchor" href="#é•œåƒå‘½ä»¤" aria-hidden="true">#</a></h2><div class="language-dockerfile"><pre><code>//æŸ¥è¯¢æœ¬æœºå…¨éƒ¨é•œåƒ
docker images
</code></pre></div><p><img src="https://cdn.nlark.com/yuque/0/2022/png/25635684/1641965580913-42f97d71-0072-4894-89e8-ac430c25db03.png#clientId=u770d0cbd-2984-4&amp;crop=0&amp;crop=0&amp;crop=1&amp;crop=1&amp;from=drop&amp;id=u8614c81a&amp;margin=%5Bobject%20Object%5D&amp;name=%E6%88%AA%E5%B1%8F2022-01-12%20%E4%B8%8B%E5%8D%881.32.53.png&amp;originHeight=222&amp;originWidth=1316&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;size=175517&amp;status=done&amp;style=none&amp;taskId=u2e96953a-1301-45fc-97c0-9ba14c0cb89&amp;title=" alt="æˆªå±2022-01-12 ä¸‹åˆ1.32.53.png"></p><div class="language-dockerfile"><pre><code>//æœç´¢é•œåƒ
docker search é•œåƒåç§°
//æ‹‰å–é•œåƒ
docker pull é•œåƒåç§°:tag
</code></pre></div><div class="language-dockerfile"><pre><code>æŸ¥çœ‹é•œåƒ/å®¹å™¨/æ•°æ®å·æ‰€å çš„ç©ºé—´
docker system df
</code></pre></div><p><img src="https://cdn.nlark.com/yuque/0/2022/png/25635684/1641974516929-d8dcd8ea-f54f-4ee4-9868-78009ea2c482.png#clientId=u770d0cbd-2984-4&amp;crop=0&amp;crop=0&amp;crop=1&amp;crop=1&amp;from=drop&amp;id=u82e13b6a&amp;margin=%5Bobject%20Object%5D&amp;name=%E6%88%AA%E5%B1%8F2022-01-12%20%E4%B8%8B%E5%8D%884.01.36.png&amp;originHeight=222&amp;originWidth=1316&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;size=143392&amp;status=done&amp;style=none&amp;taskId=u545c6dfc-c199-4784-9de2-81abf509767&amp;title=" alt="æˆªå±2022-01-12 ä¸‹åˆ4.01.36.png"></p><div class="language-dockerfile"><pre><code>//åˆ é™¤é•œåƒ
docker rmi é•œåƒidæˆ–åç§°
//å¼ºåˆ¶åˆ é™¤
docker rmi -f é•œåƒidæˆ–åç§°
//åˆ é™¤å…¨éƒ¨é•œåƒ
docker rmi -f $(docker images -qa)
</code></pre></div><h2 id="å®¹å™¨å‘½ä»¤" tabindex="-1">å®¹å™¨å‘½ä»¤ <a class="header-anchor" href="#å®¹å™¨å‘½ä»¤" aria-hidden="true">#</a></h2><div class="language-dockerfile"><pre><code>è¿è¡Œå®¹å™¨
docker run ã€optionsã€‘image ã€commandã€‘ã€argã€‘

optionsè¯´æ˜
--name=&quot;å®¹å™¨æ–°åå­—&quot; ä¸ºå®¹å™¨æŒ‡å®šä¸€ä¸ªåç§°
-d åå°è¿è¡Œå®¹å™¨å¹¶è¿”å›å®¹å™¨IDï¼Œä¹Ÿå³å¯åŠ¨å®ˆæŠ¤å¼å®¹å™¨ï¼ˆåå°è¿è¡Œï¼‰
-i ä»¥äº¤äº’æ¨¡å¼è¿è¡Œå®¹å™¨ï¼Œé€šå¸¸ä¸-tåŒæ—¶ä½¿ç”¨
-t ä¸ºå®¹å™¨é‡æ–°åˆ†é…ä¸€ä¸ªä¼ªè¾“å…¥ç»ˆç«¯ï¼Œé€šå¸¸ä¸-iåŒæ—¶ä½¿ç”¨
-P éšæœºæŒ‡å®šç«¯å£ å¤§å†™P
-p æŒ‡å®šç«¯å£ å°å†™p

åˆ—å‡ºè¿è¡Œä¸­çš„å®¹å™¨
docker ps

åˆ—å‡ºå…¨éƒ¨è¿è¡Œçš„å®¹å™¨
docker ps -a

æ˜¾ç¤ºæœ€è¿‘åˆ›å»ºçš„å®¹å™¨
docker ps -l

é€€å‡ºå®¹å™¨
exit é€€å‡ºï¼Œå®¹å™¨åœæ­¢
ctrl+p+qé€€å‡ºï¼Œå®¹å™¨ä¸åœæ­¢

å¯åŠ¨å®¹å™¨
docker start å®¹å™¨åç§°æˆ–id

åœæ­¢å®¹å™¨
docker stop å®¹å™¨åç§°æˆ–id

é‡å¯å®¹å™¨
docker restart å®¹å™¨åç§°æˆ–id

å¼ºåˆ¶åœæ­¢å®¹å™¨
docker kill å®¹å™¨åç§°æˆ–id

åˆ é™¤å®¹å™¨
docker rm å®¹å™¨åç§°æˆ–id

å¼ºåˆ¶åˆ é™¤å®¹å™¨
docker rm -f å®¹å™¨åç§°æˆ–id

æŸ¥çœ‹å®¹å™¨æ—¥å¿—
docker logs å®¹å™¨åç§°æˆ–id

æŸ¥çœ‹å®¹å™¨å†…è¿è¡Œçš„è¿›ç¨‹
docker top å®¹å™¨idæˆ–åç§°

æŸ¥çœ‹å®¹å™¨å†…éƒ¨ç»†èŠ‚
docker inspect å®¹å™¨id

è¿›å…¥è¿è¡Œä¸­å®¹å™¨å†…éƒ¨
docker exec -it å®¹å™¨idæˆ–åç§°/bin/bash
docker attach å®¹å™¨idï¼ˆexité€€å‡ºä¼šåœæ­¢å®¹å™¨ï¼Œä¸å»ºè®®ä½¿ç”¨ï¼‰

å®¹å™¨å†…æ–‡ä»¶æ‹·è´åˆ°ä¸»æœº
docker cp å®¹å™¨id:å®¹å™¨å†…è·¯å¾„ ç›®æ ‡è·¯å¾„

å¯¼å‡ºå®¹å™¨
docker export å®¹å™¨id &gt; åç§°.tar

å¯¼å…¥å®¹å™¨
cat æ–‡ä»¶å.tar|docker import - é•œåƒç”¨æˆ·/é•œåƒå:é•œåƒç‰ˆæœ¬å·

æäº¤é•œåƒ
docker commit -m=&quot;æäº¤çš„æè¿°ä¿¡æ¯&quot; -a=â€œä½œè€…â€ å®¹å™¨id è¦åˆ›å»ºçš„ç›®æ ‡é•œåƒå:[æ ‡ç­¾å]
</code></pre></div><h2 id="å®¹å™¨æ•°æ®å·" tabindex="-1">å®¹å™¨æ•°æ®å· <a class="header-anchor" href="#å®¹å™¨æ•°æ®å·" aria-hidden="true">#</a></h2><p>å·å°±æ˜¯ç›®å½•æˆ–æ–‡ä»¶ï¼Œå­˜åœ¨äºä¸€ä¸ªæˆ–å¤šä¸ªå®¹å™¨ä¸­ï¼Œç”±<strong>docker</strong>æŒ‚è½½åˆ°å®¹å™¨ï¼Œä½†ä¸å±äºè”åˆæ–‡ä»¶ç³»ç»Ÿï¼Œå› æ­¤èƒ½å¤Ÿç»•è¿‡Union file systemæä¾›ä½†ä¸€äº›ç”¨äºæŒç»­å­˜å‚¨æˆ–å…±äº«æ•°æ®ä½†ç‰¹æ€§ï¼š å·ä½†è®¾è®¡ç›®çš„å°±æ˜¯æ•°æ®çš„æŒä¹…åŒ–ï¼Œå®Œå…¨ç‹¬ç«‹äºå®¹å™¨çš„ç”Ÿå­˜å‘¨æœŸï¼Œå› æ­¤Dockerä¸ä¼šåœ¨å®¹å™¨åˆ é™¤æ—¶åˆ é™¤å…¶æŒ‚è½½çš„æ•°æ®å·ã€‚</p><div class="language-dockerfile"><pre><code>ç›®å½•æŒ‚è½½å‘½ä»¤
docker run --privileged=true -v å®¿ä¸»æœºç›®å½•ï¼šå®¹å™¨å†…ç›®å½• é•œåƒid
</code></pre></div><p><strong>æŸ¥çœ‹æ˜¯å¦æŒ‚è½½æˆåŠŸ</strong></p><div class="language-dockerfile"><pre><code>docker inspect å®¹å™¨id
</code></pre></div><p><img src="https://cdn.nlark.com/yuque/0/2022/png/25635684/1642131142641-0a50dba0-b040-4e76-a950-596aa6a3c92a.png#clientId=u770d0cbd-2984-4&amp;crop=0&amp;crop=0&amp;crop=1&amp;crop=1&amp;from=paste&amp;height=192&amp;id=uea772943&amp;margin=%5Bobject%20Object%5D&amp;name=image.png&amp;originHeight=384&amp;originWidth=1146&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;size=147868&amp;status=done&amp;style=none&amp;taskId=u60178011-c697-4315-bc0b-c66eeb0d2bb&amp;title=&amp;width=573" alt="image.png"></p><p><strong>æŒ‚è½½ç›®å½•æƒé™</strong><strong>é»˜è®¤æƒ…å†µä¸‹æŒ‚è½½ç›®å½•å’Œå®¹å™¨ç›®å½•æ˜¯rw</strong></p><div class="language-dockerfile"><pre><code>docker run --privileged=true -v å®¿ä¸»æœºç›®å½•ï¼šå®¹å™¨å†…ç›®å½•ï¼šrw é•œåƒid
</code></pre></div><p><strong>å®¹å™¨å®ä¾‹å†…éƒ¨è¢«é™åˆ¶ï¼Œä¸èƒ½å†™ï¼Œåªèƒ½è¯»</strong></p><div class="language-dockerfile"><pre><code>docker run --privileged=true -v å®¿ä¸»æœºç›®å½•ï¼šå®¹å™¨å†…ç›®å½•ï¼šro é•œåƒid
</code></pre></div><p><strong>å®¹å™¨ä¹‹é—´è·¯å¾„çš„ç»§æ‰¿å’Œå…±äº«</strong></p><div class="language-dockerfile"><pre><code>docker run --privileged=true --volumes-from çˆ¶å®¹å™¨id --name é‡å‘½å é•œåƒid
</code></pre></div><h1 id="dockerå®‰è£…mysql" tabindex="-1">dockerå®‰è£…MySQL <a class="header-anchor" href="#dockerå®‰è£…mysql" aria-hidden="true">#</a></h1><blockquote><p><strong>docker run -d -p 3306:3306 --name mysql1 -v /d/DevEnv/mysql/conf:/etc/mysql/conf.d -v /d/DevEnv/mysql/datadir:/var/lib/mysql -e MYSQL_ROOT_PASSWORD=123456 mysql:8.0.26</strong></p></blockquote><blockquote><p>docker run -p 3306:3306 --name mysql2 -e MYSQL_ROOT_PASSWORD=123456 -d mysql:8.0.26 docker run mysql1 -p 3306:3306</p></blockquote><blockquote><p>å¯åŠ¨ï¼ˆm1èŠ¯ç‰‡æš‚æ— msqlç‰ˆæœ¬é•œåƒï¼Œæ‰€ä»¥ä½¿ç”¨mysql-serverï¼‰</p></blockquote><blockquote><p>docker run -d -p 3306:3306 --name mysql1 -v /Users/liqiang/devins/mysql/conf:/etc/mysql/conf.d -v /Users/liqiang/devins/mysql/datadir:/var/lib/mysql -e MYSQL_ROOT_PASSWORD=123456 mysql/mysql-server</p></blockquote><blockquote><p><strong>è¿›å…¥å®¹å™¨</strong><strong>docker exec -it mysql bash</strong></p></blockquote><blockquote><p><strong>ç™»é™†mysql</strong><strong>mysql -u root -p</strong></p></blockquote><blockquote><p>grant all on <em>.</em> to &#39;root&#39;@&#39;%&#39;; GRANT ALL PRIVILEGES ON <em>.</em> TO &#39;root&#39;@&#39;%&#39; IDENTIFIED BY &#39;123456&#39; WITH GRANT OPTION; ALTER USER &#39;root&#39;@&#39;%&#39; IDENTIFIED WITH mysql_native_password BY &#39;123456&#39;;</p></blockquote><blockquote><p><strong>è®¾ç½®ç”¨æˆ·è¿œç¨‹ç™»å½•</strong></p></blockquote><blockquote><p>ä½¿ç”¨mysql use mysql ä¿®æ”¹å¯†ç ï¼š ALTER USER &#39;root&#39;@&#39;localhost&#39; IDENTIFIED BY &#39;123456&#39;; ä¿®æ”¹ipä¸ºæ‰€æœ‰å¯è®¿é—® update user set host=&#39;%&#39; where user=&#39;root&#39;; æŸ¥çœ‹ select host,user from user; åˆ·æ–° flush privileges;</p></blockquote><h2 id="åŸºäºdockerçš„mysqlä¸»ä»å¤åˆ¶" tabindex="-1">åŸºäºdockerçš„mysqlä¸»ä»å¤åˆ¶ <a class="header-anchor" href="#åŸºäºdockerçš„mysqlä¸»ä»å¤åˆ¶" aria-hidden="true">#</a></h2><div class="language-dockerfile"><pre><code>docker run -d -p 3307:3306 --name mysql-master -v /Users/liqiang/devins/mysql-master/conf:/etc/mysql -v /Users/liqiang/devins/mysql-master/datadir:/var/lib/mysql -e MYSQL_ROOT_PASSWORD=123456  mysql/mysql-server
</code></pre></div><p><strong>masteré…ç½®</strong></p><div class="language-dockerfile"><pre><code>[mysqld]
<span class="token comment"># è®¾ç½®server_id</span>
server_id=101
<span class="token comment">#</span>
binlog-ignore-db=mysql
<span class="token comment">#</span>
log-bin=mall-mysql-bin
<span class="token comment">#</span>
binlog_cache_size=1M
<span class="token comment">#</span>
binlog_format=mixed
<span class="token comment">#</span>
expire_logs_days=7
<span class="token comment">#</span>
slave_skip_errors=1062
</code></pre></div><h1 id="dockerå®‰è£…redis" tabindex="-1">dockerå®‰è£…redis <a class="header-anchor" href="#dockerå®‰è£…redis" aria-hidden="true">#</a></h1><blockquote><p>docker exec -it myredis redis-cli è¿æ¥rediså®¢æˆ·ç«¯</p></blockquote><blockquote><p>docker run -d -p 6379:6379 -v /Users/lq/devinstall/myredis/conf:/usr/local/etc/redis -v /Users/lq/devinstall/myredis/data:/data --name myredis redis:6.2.6 redis-server /usr/local/etc/redis/redis.conf</p></blockquote><h2 id="docker-redisé›†ç¾¤å®‰è£…ï¼ˆä¼ªé›†ç¾¤ï¼‰" tabindex="-1">docker redisé›†ç¾¤å®‰è£…ï¼ˆä¼ªé›†ç¾¤ï¼‰ <a class="header-anchor" href="#docker-redisé›†ç¾¤å®‰è£…ï¼ˆä¼ªé›†ç¾¤ï¼‰" aria-hidden="true">#</a></h2><hr><p><strong>å¯åŠ¨å…­å°redis</strong></p><div class="language-dockerfile"><pre><code>docker run -d --name redis-node1 -v /Users/liqiang/devins/redis/data/node1:/data -p 6381:6381 -p 16381:16381 redis:6.2.6 --cluster-enabled yes --appendonly yes --port 6381 
docker run -d --name redis-node2 -v /Users/liqiang/devins/redis/data/node2:/data -p 6382:6382 -p 16382:16382 redis:6.2.6 --cluster-enabled yes --appendonly yes --port 6382 
docker run -d --name redis-node3 -v /Users/liqiang/devins/redis/data/node3:/data -p 6383:6383 -p 16383:16383 redis:6.2.6 --cluster-enabled yes --appendonly yes --port 6383 
docker run -d --name redis-node4 -v /Users/liqiang/devins/redis/data/node4:/data -p 6384:6384 -p 16384:16384 redis:6.2.6 --cluster-enabled yes --appendonly yes --port 6384 
docker run -d --name redis-node5 -v /Users/liqiang/devins/redis/data/node5:/data -p 6385:6385 -p 16385:16385 redis:6.2.6 --cluster-enabled yes --appendonly yes --port 6385 
docker run -d --name redis-node6 -v /Users/liqiang/devins/redis/data/node6:/data -p 6386:6386 -p 16386:16386 redis:6.2.6 --cluster-enabled yes --appendonly yes --port 6386 
</code></pre></div><p>é›†ç¾¤å…³è” æ³¨æ„ï¼šè¿›å…¥dockerå®¹å™¨åæ‰èƒ½æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼Œä¸”æ³¨æ„è‡ªå·±çš„çœŸå®IPåœ°å€</p><div class="language-dockerfile"><pre><code>redis-cli --cluster create 192.168.0.120:6381 192.168.0.120:6382 192.168.0.120:6383 192.168.0.120:6384 192.168.0.120:6385 192.168.0.120:6386 --cluster-replicas 1
</code></pre></div><p>--cluster-replicas 1è¡¨ç¤ºæ¯ä¸ªmasteråˆ›å»ºä¸€ä¸ªslaveèŠ‚ç‚¹ <img src="https://cdn.nlark.com/yuque/0/2022/png/25635684/1642344498422-c54f41d2-65eb-4f5b-8dfd-dfba71486d07.png#clientId=u770d0cbd-2984-4&amp;crop=0&amp;crop=0&amp;crop=1&amp;crop=1&amp;from=paste&amp;height=907&amp;id=ubb38487b&amp;margin=%5Bobject%20Object%5D&amp;name=image.png&amp;originHeight=1814&amp;originWidth=1172&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;size=1077855&amp;status=done&amp;style=none&amp;taskId=udb7414cc-8e5e-4a71-b35d-debd7972f62&amp;title=&amp;width=586" alt="image.png"></p><p>æŸ¥çœ‹é›†ç¾¤ä¿¡æ¯</p><div class="language-dockerfile"><pre><code>cluster info
</code></pre></div><p><img src="https://cdn.nlark.com/yuque/0/2022/png/25635684/1642490303533-2d59bc96-dcbe-46c1-a07a-d4893acca2d8.png#clientId=ua11cf2b8-2d2c-4&amp;crop=0&amp;crop=0&amp;crop=1&amp;crop=1&amp;from=paste&amp;height=305&amp;id=ua1a523a5&amp;margin=%5Bobject%20Object%5D&amp;name=image.png&amp;originHeight=610&amp;originWidth=784&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;size=282354&amp;status=done&amp;style=none&amp;taskId=ucfcd7a2f-0c2b-4123-9172-2c95b42488b&amp;title=&amp;width=392" alt="image.png"></p><p>æŸ¥çœ‹é›†ç¾¤èŠ‚ç‚¹æƒ…å†µ</p><div class="language-dockerfile"><pre><code>cluster nodes
</code></pre></div><p><img src="https://cdn.nlark.com/yuque/0/2022/png/25635684/1642490337594-05550568-aa0a-4114-b6c3-3ce391176b58.png#clientId=ua11cf2b8-2d2c-4&amp;crop=0&amp;crop=0&amp;crop=1&amp;crop=1&amp;from=paste&amp;height=130&amp;id=u4b65d431&amp;margin=%5Bobject%20Object%5D&amp;name=image.png&amp;originHeight=260&amp;originWidth=2492&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;size=385098&amp;status=done&amp;style=none&amp;taskId=u65b27f1f-b60a-4eb5-8d20-706a815d51f&amp;title=&amp;width=1246" alt="image.png"><strong>ä½¿ç”¨å®¢æˆ·ç«¯è¿æ¥redisæ—¶ï¼Œè¯·ä½¿ç”¨redis-cli -p 6381 -c</strong><strong>åŠ å…¥-cå‚æ•°ï¼Œä¼˜åŒ–è·¯ç”±</strong></p><p>æŸ¥çœ‹é›†ç¾¤è¯¦ç»†ä¿¡æ¯</p><div class="language-dockerfile"><pre><code>redis-cli --cluster check 192.168.0.120:6381
</code></pre></div><p><img src="https://cdn.nlark.com/yuque/0/2022/png/25635684/1642491878425-0eb02be6-5cfd-412c-b878-eb9cdac58d9d.png#clientId=ua11cf2b8-2d2c-4&amp;crop=0&amp;crop=0&amp;crop=1&amp;crop=1&amp;from=paste&amp;height=517&amp;id=u46d0ffc8&amp;margin=%5Bobject%20Object%5D&amp;name=image.png&amp;originHeight=1034&amp;originWidth=1256&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;size=729144&amp;status=done&amp;style=none&amp;taskId=u022f5d52-0f1a-42ce-aad2-4ae63d82581&amp;title=&amp;width=628" alt="image.png"></p><p><strong>é›†ç¾¤æ‰©å®¹</strong> å°†æ–°èŠ‚ç‚¹åŠ å…¥é›†ç¾¤</p><div class="language-dockerfile"><pre><code>redis-cli --cluster add-node ipåœ°å€:6387 ipåœ°å€:6381
</code></pre></div><p>6387å°±æ˜¯å°†è¦ä½œä¸ºmasteræ–°å¢èŠ‚ç‚¹ 6381å°±æ˜¯åŸæ¥é›†ç¾¤èŠ‚ç‚¹é‡Œé¢ç‚¹ä¸»èŠ‚ç‚¹ â€‹</p><p><strong>é‡æ–°åˆ†æ´¾æ§½å·</strong></p><div class="language-dockerfile"><pre><code>redis-cli --cluster reshard 192.168.0.120:6381
</code></pre></div><p><strong>é‡æ–°æŒ‚è½½ä»èŠ‚ç‚¹</strong></p><div class="language-dockerfile"><pre><code>redis-cli --cluster add-node æ–°slaveipåœ°å€:6387 æ–°masteripåœ°å€:6381 --cluster-slave --cluster-master-id æ–°ä¸»æœºèŠ‚ç‚¹id

redis-cli --cluster add-node 192.168.0.120:6388 192.168.0.120:6387 --cluster-slave --cluster-master-id bac9cc96b59c91d785acdbceeec6f75e71318738
</code></pre></div><p>é›†ç¾¤ç´¢å®¹</p><p>å…ˆåˆ é™¤ä»æœº</p><div class="language-dockerfile"><pre><code>redis-cli --cluster del-node ipåœ°å€:ç«¯å£ èŠ‚ç‚¹id
</code></pre></div><p>é‡æ–°åˆ†é…æ§½å·</p><div class="language-dockerfile"><pre><code>redis-cli --cluster reshard 192.168.0.120:6381
</code></pre></div><p>åˆ é™¤ä¸»èŠ‚ç‚¹</p><div class="language-dockerfile"><pre><code>redis-cli --cluster del-node ipåœ°å€:ç«¯å£ èŠ‚ç‚¹id
</code></pre></div><p>å‘1:<strong>--net hos</strong><strong>MacOSå’Œdockerç½‘ç»œäº¤äº’ï¼Œä¸æ”¯æŒhostæ¨¡å¼ï¼ˆ--net hostï¼‰ï¼Œéœ€è¦ä½¿ç”¨é»˜è®¤çš„bridgeæ¨¡å¼ï¼ˆä½¿ç”¨-pæ˜ å°„ç«¯å£ï¼‰</strong> å‘2:**Waiting for the cluster to join ** redis-cli --cluster createç¯èŠ‚ï¼Œä¸€ç›´å¡åˆ°&quot;Waiting for the cluster to joinâ€ç¯èŠ‚ã€‚ Redisé›†ç¾¤ä¸­çš„å„ä¸ªèŠ‚ç‚¹ï¼Œéœ€è¦å¼€æ”¾ä¸€ä¸ªç«¯å£ï¼ŒåŒå…¶ä»–èŠ‚ç‚¹å»ºç«‹è¿æ¥ï¼Œç”¨äºæ¥æ”¶å¿ƒè·³æ•°æ®ç­‰æ“ä½œã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œredis-node1èŠ‚ç‚¹ï¼Œå¼€æ”¾6379ç«¯å£ä¾›clientè¿æ¥æ—¶ï¼ŒåŒæ—¶æä¾›16379ç«¯å£(10000 + 6379)ï¼Œä¾›å…¶ä»–RedisèŠ‚ç‚¹è¿æ¥ã€‚</p><p>é›†ç¾¤åˆå§‹åŒ–è¿‡ç¨‹ä¸­ï¼Œéœ€è¦åŒå…¶ä»–Rediså»ºç«‹è¿æ¥ï¼Œè¿›è¡Œé€šä¿¡ã€‚è‹¥èŠ‚ç‚¹é—´æ— æ³•è¿æ¥ï¼Œæ­¤æ—¶ä¼šé˜»å¡ï¼Œè¿™ä¹Ÿå°±æ˜¯ä¸€ç›´é˜»å¡åˆ°&quot;Waiting for the cluster to join&quot;ç¯èŠ‚çš„åŸå› ã€‚</p><p>å®˜æ–¹é€šè¿‡--net=hostï¼ŒæŒ‡å®šç½‘ç»œç±»å‹ä¸ºhostï¼Œä½¿å¾—å®¹å™¨ä¸å®¿ä¸»æœºä½¿ç”¨åŒä¸€ç½‘ç»œï¼Œä»è€Œè§„é¿äº†è¿™ç±»é—®é¢˜ã€‚ å½“ç„¶ï¼Œè‹¥ä¸æƒ³ä¿®æ”¹å®¹å™¨ç½‘ç»œç±»å‹çš„è¯ï¼Œåˆ™ï¼Œéœ€è¦åŒæ—¶æš´éœ²ä¸¤ä¸ªç«¯å£ï¼Œç”¨äºæä¾›clientå’Œå…¶ä»–èŠ‚ç‚¹ <img src="https://cdn.nlark.com/yuque/0/2022/png/25635684/1642344952745-9fd6bfea-3693-4c02-904b-1ead46e751da.png#clientId=ua11cf2b8-2d2c-4&amp;crop=0&amp;crop=0&amp;crop=1&amp;crop=1&amp;from=paste&amp;height=249&amp;id=u966e6ca3&amp;margin=%5Bobject%20Object%5D&amp;name=image.png&amp;originHeight=498&amp;originWidth=1848&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;size=124779&amp;status=done&amp;style=none&amp;taskId=ud5460791-20c6-4072-a4a4-6501031f2d6&amp;title=&amp;width=924" alt="image.png"></p></div></div><footer class="page-footer" data-v-8fcebc32 data-v-5c96fb00><div class="edit" data-v-5c96fb00><div class="edit-link" data-v-5c96fb00 data-v-55695e90><!----></div></div><div class="updated" data-v-5c96fb00><!----></div></footer><!----><!--[--><!--]--></div></main></div><!----><!--]--></div><div class="theme-select" data-v-3eaa5914><ul data-v-3eaa5914><li class="active" data-v-3eaa5914> â˜€ï¸ </li><li class="" data-v-3eaa5914> ğŸŒ‘ </li></ul></div><div class="site-footer" data-v-3eaa5914> MIT Licensed | Copyright Â© 2022 <a class="vitepress" href="https://github.com/shadowLQ/blog">æ—¶åˆ»å‡†å¤‡ç€</a><br> Powered by <a class="vitepress" target="_blank" href="//vitepress.vuejs.org/">VitePress</a></div><!--]--></div>
    <script>__VP_HASH_MAP__ = JSON.parse("{\"index.md\":\"25431e8f\",\"pages_about.md\":\"8f79ad74\",\"pages_archives.md\":\"1f0b42e6\",\"pages_tags.md\":\"520d0601\",\"posts_bigdecimalçš„ä½¿ç”¨ä¸æ³¨æ„äº‹é¡¹.md\":\"981eff7f\",\"posts_docker.md\":\"b1b5f667\",\"posts_macå’Œwindowäº’ä¼ æ–‡ä»¶.md\":\"c794345c\",\"posts_yarn.md\":\"d2981a53\",\"posts_å¸¸ç”¨åˆ†å¸ƒå¼idè§£å†³æ–¹æ¡ˆ.md\":\"9856da27\"}")</script>
    <script type="module" async src="/blog/assets/app.696abebf.js"></script>
    
  </body>
</html>